<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="keywords" content="ä¸­äºŒç—…ä¹Ÿè¦å¯«ç¨‹å¼"><meta name="description" content="ä¸­äºŒç—…ä¹Ÿè¦å¯«ç¨‹å¼"><meta property="og:title" content="ä¸­äºŒç—…ä¹Ÿè¦å¯«ç¨‹å¼"><meta property="og:description" content="ä¸­äºŒç—…ä¹Ÿè¦å¯«ç¨‹å¼"><meta name="twitter:title" content="ä¸­äºŒç—…ä¹Ÿè¦å¯«ç¨‹å¼"><meta name="twitter:description" content="ä¸­äºŒç—…ä¹Ÿè¦å¯«ç¨‹å¼"><base href="/Blog/"><link href="css/bootstrap/bootstrap.min.css" rel="stylesheet"><link href="css/app.css" rel="stylesheet"><link href="Blog.styles.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;display=swap" rel="stylesheet"><link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet"><link rel="stylesheet" href="css/a11y-dark.min.css"><link rel="stylesheet" href="css/custom.css"><script src="https://partner.googleadservices.com/gampad/cookie.js?domain=localhost&amp;callback=_gfp_s_&amp;client=ca-pub-7750788533596067&amp;cookie=ID%3D3807842bdc642316-2278a985b6db00d4%3AT%3D1677930310%3ART%3D1677930310%3AS%3DALNI_MZ9d7V-bjIkoUkers4-JorUDCC2vg&amp;gpic=UID%3D000009569b42e752%3AT%3D1677930310%3ART%3D1677930310%3AS%3DALNI_MZ43Ab-KxIUzsnclzlavQUfcbsUsA"></script><script src="https://pagead2.googlesyndication.com/pagead/managed/js/adsense/m202302210101/show_ads_impl.js?bust=31072648" id="google_shimpl"></script><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7750788533596067" crossorigin="anonymous" data-checked-head="true"></script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://pagead2.googlesyndication.com"><meta http-equiv="origin-trial" content="Az6AfRvI8mo7yiW5fLfj04W21t0ig6aMsGYpIqMTaX60H+b0DkO1uDr+7BrzMcimWzv/X7SXR8jI+uvbV0IJlwYAAACFeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjgwNjUyNzk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="><meta http-equiv="origin-trial" content="A+USTya+tNvDPaxUgJooz+LaVk5hPoAxpLvSxjogX4Mk8awCTQ9iop6zJ9d5ldgU7WmHqBlnQB41LHHRFxoaBwoAAACLeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjgwNjUyNzk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="><meta http-equiv="origin-trial" content="A7FovoGr67TUBYbnY+Z0IKoJbbmRmB8fCyirUGHavNDtD91CiGyHHSA2hDG9r9T3NjUKFi6egL3RbgTwhhcVDwUAAACLeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjgwNjUyNzk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="><link rel="preconnect" href="https://googleads.g.doubleclick.net"><link rel="preload" href="https://adservice.google.com/adsid/integrator.js?domain=localhost" as="script"><script type="text/javascript" src="https://adservice.google.com/adsid/integrator.js?domain=localhost"></script><link rel="preconnect" href="https://partner.googleadservices.com"><link rel="preconnect" href="https://adservice.google.com"><link rel="preconnect" href="https://tpc.googlesyndication.com"><link rel="preconnect" href="https://www.google.com"><!--!--><title>ä¸­äºŒç—…ä¹Ÿè¦å¯«ç¨‹å¼</title><!--!--><!--!--></head><body style="background-color:#2b2c30"><div id="app" style="width:100vw;height:100vh"><!--!--><!--!--><!--!--><!--!--><div class="page" b-p6zcnqvy2k=""><div class="sidebar" style="background-image:url(images/nav.jpg);background-repeat:no-repeat;background-size:cover" b-p6zcnqvy2k=""><!--!--><!--!--><div class="top-row ps-3 navbar navbar-dark" b-wtm1afifms=""><div class="container-fluid" b-wtm1afifms=""><a class="navbar-brand" href="" b-wtm1afifms="">ä¸­äºŒç—…ä¹Ÿè¦å¯«ç¨‹å¼</a></div></div><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none navlist" style="color:#fff;overflow-y:auto;height:95%"><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple mud-expanded"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">C#</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon mud-transform" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-collapse-entered mud-navgroup-collapse" style="height:auto" _bl_2=""><div class="mud-collapse-wrapper" _bl_3=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./csharp1" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->C#åŸºç¤ - new vs overrvide</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./csharp2" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->ASP.NET Web API è¨Šæ¯è™•ç†å™¨</div></a></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">Blazor</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-navgroup-collapse" style="" _bl_12=""><div class="mud-collapse-wrapper" _bl_13=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./blazor1" rel="" class="mud-nav-link"><div class="mud-nav-link-text">StateHasChanged() vs InvokeAsync(StateHasChanged)</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./blazor2" rel="" class="mud-nav-link"><div class="mud-nav-link-text">Service Lifetime</div></a></div></div></div></div></div></div></div></div></div></div></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple mud-expanded"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">JavaScript</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon mud-transform" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-collapse-entered mud-navgroup-collapse" style="height:auto" _bl_4=""><div class="mud-collapse-wrapper" _bl_5=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./javascript1" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->Promise ç°¡ä»‹</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./javascript2" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->ä½¿ç”¨ Promise é”åˆ°åŒæ­¥ç­‰å¾…jsè³‡æºè¼‰å…¥</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./javascript3" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->å‚³çµ±å‡½å¼ VS ç®­é ­å‡½å¼</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./javascript4" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->Cookieã€LocalStorageã€SessionStorage å·®ç•°</div></a></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">Vue</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-navgroup-collapse" style="" _bl_14=""><div class="mud-collapse-wrapper" _bl_15=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./vue1" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->Vue ç”Ÿå‘½é€±æœŸ</div></a></div></div></div></div></div></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">Nuxt</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-navgroup-collapse" style="" _bl_16=""><div class="mud-collapse-wrapper" _bl_17=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./nuxt1" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->Nuxt ç”Ÿå‘½é€±æœŸ</div></a></div></div></div></div></div></div></div></div></div></div></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple mud-expanded"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">Css</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon mud-transform" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-collapse-entered mud-navgroup-collapse" style="height:auto" _bl_6=""><div class="mud-collapse-wrapper" _bl_7=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./css1" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->EM èˆ‡ REM çš„å·®ç•°</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./css2" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->VHã€VWã€VMINã€VMAX</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./css3" rel="" class="mud-nav-link"><div class="mud-nav-link-text">Display Flex</div></a></div></div></div></div></div></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple mud-expanded"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">Dart</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon mud-transform" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-collapse-entered mud-navgroup-collapse" style="height:auto" _bl_8=""><div class="mud-collapse-wrapper" _bl_9=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./dart1" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->DartåŸºç¤ - åˆå…¥dart</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./dart2" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->DartåŸºç¤ - @immutable</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./dart3" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->DartåŸºç¤ - å»ºæ§‹å¼</div></a></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">Flutter</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-navgroup-collapse" style="" _bl_18=""><div class="mud-collapse-wrapper" _bl_19=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./flutter1" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->ç·¨è­¯éŒ¯èª¤ : missing an input or output annotation</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./flutter2" rel="" class="mud-nav-link active"><div class="mud-nav-link-text"><!--!-->ä»€éº¼æ˜¯ Bloc Design Pattern</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./flutter3" rel="" class="mud-nav-link"><div class="mud-nav-link-text">MaterialApp</div></a></div></div></div></div></div></div></div></div></div></div></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple mud-expanded"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">Web Deploy</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon mud-transform" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-collapse-entered mud-navgroup-collapse" style="height:auto" _bl_10=""><div class="mud-collapse-wrapper" _bl_11=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./githubpage" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->Blazor WebAssembly ä½¿ç”¨ Github Pages é€²è¡Œéƒ¨å±¬</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./gcpvm" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->Google Cloud Platform å‰µå»ºè™›æ“¬ä¸»æ©Ÿ (VM) ä¾†æ¶è¨­ç¶²ç«™</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./gcpdocker" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->ä½¿ç”¨ Docker å»ºç«‹ MySQL</div></a></div></div></div></div></div></div></div></div><!--!--><main b-p6zcnqvy2k=""><article class="content px-4" b-p6zcnqvy2k=""><div b-p6zcnqvy2k=""><!--!--><!--!--><div class="article"><h2><b>ä»€éº¼æ˜¯Bloc Design Pattern</b></h2><p>Bloc å…¨åæ˜¯ã€ŒBusiness Logic Componentã€ï¼Œç”¨ä¾†åˆ†é›¢UIå±¤å’Œå•†æ¥­é‚è¼¯å±¤ï¼Œæœ‰åŠ©æ–¼ç¨‹å¼ç¢¼çš„ç¶­è­·ã€é‡è¤‡åˆ©ç”¨ä»¥åŠæ¸¬è©¦ã€‚</p><h3><b>Bloc çš„æµç¨‹</b></h3><img src="images/flutter_2_1.png" alt="flutter_2_1" class="imgfmt" style="width:50%"><p>Bloc å±¤æœƒæ¥æ”¶ä½¿ç”¨è€…çš„è¡Œç‚º (ä¾‹å¦‚é»æ“ŠButton)ï¼Œæ ¹æ“šä¸åŒçš„äº‹ä»¶(Event)Blocæœƒå»å‘¼å«ç›¸æ‡‰çš„å‡½å¼(å¯èƒ½æ˜¯å»è³‡æ–™åº«æŠ“è³‡æ–™æˆ–ä½¿ç”¨ api )ã€‚ ä¹‹å¾Œæ ¹æ“šçµæœå›å‚³ç›¸æ‡‰çš„ç‹€æ…‹ (State) çµ¦UIå±¤ï¼ŒUIå‰‡æ ¹æ“šç‹€æ…‹åšè®ŠåŒ–ã€‚</p><h3><b>ä½¿ç”¨Flutter Bloc å¥—ä»¶</b></h3><p>Flutter Bloc å¥—ä»¶æ˜¯ç”±Felix Angelovæ‰€é–‹ç™¼çš„å¥—ä»¶ï¼Œèƒ½å¤ å¹«åŠ©é–‹ç™¼äººå“¡å¯¦ä½œ Bloc patternã€‚ ä»–å°‡ Bloc åŒ…è£æˆæ›´å®¹æ˜“ç†è§£å’Œç¶­è­·çš„æ¡†æ¶ï¼Œè€Œä¸”æŠŠè¨±å¤šç´°ç¯€éƒ½å¹«æˆ‘å€‘åšå¥½äº†(ä¾‹å¦‚é—œé–‰Streamã€Logç­‰ç­‰)ã€‚</p><h3><b>Bloc Event</b></h3><pre><code class="DART hljs language-java">
        <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginEvent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Equatable</span> {
            LoginEvent([<span class="hljs-type">List</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> const []]) : <span class="hljs-built_in">super</span>(props);
        }

        <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailChanged</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">LoginEvent</span> {
            <span class="hljs-keyword">final</span> String email;

            EmailChanged({<span class="hljs-meta">@required</span> <span class="hljs-built_in">this</span>.email}) : <span class="hljs-built_in">super</span>([email]);

            <span class="hljs-meta">@override</span>
            String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> =&gt; <span class="hljs-string">'EmailChanged { email :$email }'</span>;
        }
    </code></pre><h3><b>Bloc State</b></h3><pre><code class="DART hljs language-less">
        <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">LoginState</span> {
            <span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">isEmailValid</span>;
            <span class="hljs-selector-tag">final</span> <span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">isPasswordValid</span>;

            <span class="hljs-selector-tag">LoginState</span>({
                <span class="hljs-variable">@required</span> this.isEmailValid,
                <span class="hljs-variable">@required</span> this.isPasswordValid,
            });

            <span class="hljs-selector-tag">factory</span> <span class="hljs-selector-tag">LoginState</span><span class="hljs-selector-class">.empty</span>() {
                <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">LoginState</span>(
                    <span class="hljs-attribute">isEmailValid</span>: true,
                    <span class="hljs-attribute">isPasswordValid</span>: true,
                );
            }
        }
     </code></pre><h3><b>Bloc</b></h3><p>å®šç¾© Bloc ç‰©ä»¶éœ€å…ˆç¹¼æ‰¿å¥—ä»¶æä¾›çš„ Bloc classï¼Œä¸¦çµ¦äºˆå®šç¾©å¥½çš„Eventç‰©ä»¶å’ŒStateç‰©ä»¶ï¼Œå’Œå®šç¾© Bloc åˆå§‹çš„Stateã€‚<br>å¦å¤–ä¸€å®šè¦å¯¦ä½œçš„æ˜¯mapEventToStateï¼Œå°‡æ¥æ”¶åˆ°çš„Eventç”¨å°æ‡‰çš„å•†æ¥­é‚è¼¯(Business Logic)åšè™•ç†ï¼Œæœ€å¾Œå›å‚³åŒ…è£æˆStreamçš„State</p><pre><code class="DART hljs language-csharp">
        <span class="hljs-keyword">class</span> <span class="hljs-title">LoginBloc</span> <span class="hljs-title">extends</span> <span class="hljs-title">Bloc</span>&lt;<span class="hljs-title">LoginEvent</span>, <span class="hljs-title">LoginState</span>&gt; {
            @override
            LoginState <span class="hljs-keyword">get</span> initialState =&gt; LoginState.<span class="hljs-keyword">init</span>();

            @override
            <span class="hljs-function">Stream&lt;LoginState&gt; <span class="hljs-title">mapEventToState</span>(<span class="hljs-params">LoginEvent <span class="hljs-keyword">event</span></span>) <span class="hljs-keyword">async</span>*</span> {
                <span class="hljs-comment">// ä¾ç…§æ¥æ”¶åˆ°çš„EventåŸ·è¡Œå°æ‡‰çš„æ–¹æ³•</span>
               <span class="hljs-keyword">if</span> (<span class="hljs-keyword">event</span> <span class="hljs-keyword">is</span> LoginWithCredentialsPressed) {
                    <span class="hljs-keyword">yield</span>* _mapLoginWithCredentialsPressedToState(
                    email: <span class="hljs-keyword">event</span>.email,
                    password: <span class="hljs-keyword">event</span>.password,
                    );
                }
            }

            Stream&lt;LoginState&gt; _mapLoginWithCredentialsPressedToState({
                String email,
                String password,
            }) <span class="hljs-keyword">async</span>* {
                <span class="hljs-comment">// ä½¿ç”¨å¸³è™Ÿå’Œå¯†ç¢¼é€²è¡Œç™»å…¥ï¼ŒæˆåŠŸå°±å›å‚³sucessçš„State</span>
                <span class="hljs-comment">// å¤±æ•—å‰‡å›å‚³Failureçš„State</span>
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">await</span> _userRepository.signInWithCredentials(email, password);
                    <span class="hljs-keyword">yield</span> LoginState.success();
                } <span class="hljs-keyword">catch</span> (_) {
                    <span class="hljs-keyword">yield</span> LoginState.failure();
                }
            }
        }
    </code></pre><h3><b>Dispatch</b></h3><p>é‚£éº¼è©²å¦‚ä½•è§¸ç™¼Eventå‘¢?<br>Blocå…§æä¾›dispatch æ–¹æ³•å¯ä»¥ç”¨Eventä½œç‚ºåƒæ•¸ï¼Œå®ƒæœƒè§¸ç™¼mapEventToStateï¼Œæ¥è‘—å°±æ˜¯åŸ·è¡ŒEventèˆ‡Stateçš„è½‰æ›ã€‚</p><pre><code class="DART hljs language-java">
        <span class="hljs-comment">// ç¤ºæ„ç”¨ç¨‹å¼ç¢¼</span>
        <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
            <span class="hljs-type">LoginBloc</span> <span class="hljs-variable">bloc</span> <span class="hljs-operator">=</span> LoginBloc();
            <span class="hljs-comment">// ç•¥...</span>
            RaisedButton(
              onPressed: (){
                  bloc.dispatch(LoginWithGooglePressed);
              },
              child: Text(<span class="hljs-string">'Google Login'</span>),
            )
        }
    </code></pre><h3><b>BlocProvider</b></h3><p>åœ¨ Bloc packageä¸­ï¼ŒWidget æœ¬èº«ä¸¦ä¸æœƒç›´æ¥æ“æœ‰ã€æˆ–æ˜¯ç›´æ¥åƒç…§ Blocï¼Œè€Œæ˜¯é€é BlocProvider å°‡ Blocã€<br>ä»¥åŠç”¨åˆ°é€™å€‹ Bloc çš„ Widget ç¶èµ·ä¾†ï¼ŒWidget è¦åœ¨ Widget Tree ç•¶ä¸­å¾€ä¸Šæ‰¾åˆ° BlocProvider ä¹‹å¾Œï¼Œå†è·Ÿ BlocProvider è©¢å• Blocã€‚<br><br>å»ºç«‹ BlocProvider çš„æ–¹å¼åƒé€™æ¨£ã€‚æˆ‘å€‘æœ‰ä¸€å€‹ä¸Šå±¤çš„ Widgetï¼Œè£¡é ­åŒ…å«äº†ä¸€å€‹èˆ‡ç™»å…¥ç›¸é—œçš„ AuthenticationBlocï¼Œ<br>è€Œæˆ‘å€‘ App ä¸­çš„ä¸»è¦ç•«é¢éƒ½åœ¨ PageWidget è£¡é ­çš„è©±ï¼š</p><pre><code class="DART hljs language-javascript">
        <span class="hljs-keyword">var</span> _bloc = <span class="hljs-title class_">AuthenticationBloc</span>();
        <span class="hljs-title class_">Widget</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">BuildContext context</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">BlocProvider</span>(
                <span class="hljs-attr">bloc</span>: _bloc,
                <span class="hljs-attr">child</span>: <span class="hljs-title class_">PageWidget</span>()),
            );
        }
    </code></pre><p>åœ¨ PageWidgetï¼Œä»¥åŠ PageWidget ä»¥ä¸‹ä»»ä½•ä¸€å±¤çš„æ‰€æœ‰ childrenï¼Œéƒ½å¯ä»¥å¾€ä¸Šã€åœ¨ build context ä¸­æ‰¾åˆ° AuthenticationBlocï¼š</p><pre><code class="DART hljs language-swift">
        <span class="hljs-keyword">final</span> authenticationBloc <span class="hljs-operator">=</span> <span class="hljs-type">BlocProvider</span>.of<span class="hljs-operator">&lt;</span><span class="hljs-type">Bloc</span>&lt;<span class="hljs-type">AuthenticationEvent</span>, <span class="hljs-type">AuthenticationState</span>&gt;<span class="hljs-operator">&gt;</span>(context);
    </code></pre><h3><b>BlocBuilder</b></h3><p>æˆ‘å€‘æœƒå¸Œæœ› Bloc åœ¨ç‹€æ…‹æ›´æ–°ä¹‹å¾Œï¼Œè‡ªå‹•æ›´æ–°ç›¸é—œçš„ UIï¼Œè€Œä¸æ˜¯æˆ‘å€‘è‡ªå·±å†å»å‘¼å« setState()ï¼Œ<br>è€Œ Bloc package æä¾›äº† BlocBuilderï¼Œåªè¦æ˜¯é€™å€‹ Bloc ç™¼ç”Ÿè®Šå‹•ï¼Œå°±æœƒåŸ·è¡Œæˆ‘å€‘æ‰€æŒ‡å®šçš„ WidgetBuilderã€‚</p><pre><code class="DART hljs language-kotlin">
        <span class="hljs-keyword">final</span> authenticationBloc = BlocProvider.of&lt;Bloc&lt;AuthenticationEvent, AuthenticationState&gt;&gt;(context);
        <span class="hljs-keyword">return</span> BlocBuilder&lt;AuthenticationEvent, AuthenticationState&gt;(
            bloc: authenticationBloc,
            builder: (context, state) {
                <span class="hljs-keyword">if</span> (state <span class="hljs-keyword">is</span> AuthenticatedState) {
                    <span class="hljs-keyword">return</span> Text(<span class="hljs-string">'å·²ç™»å…¥ ${state.email}'</span>);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> Text(<span class="hljs-string">'å°šæœªç™»å…¥'</span>);
                }
            });
    </code></pre></div></div></article></main></div><!--!--><!--!--></div><div id="blazor-error-ui">An unhandled error has occurred. <a href="" class="reload">Reload</a> <a class="dismiss">ğŸ—™</a></div><script src="_framework/blazor.webassembly.js"></script><ins class="adsbygoogle adsbygoogle-noablate" data-adsbygoogle-status="done" style="display:none!important" data-ad-status="unfilled"><div id="aswift_0_host" tabindex="0" title="Advertisement" aria-label="Advertisement" style="border:none;height:0;width:0;margin:0;padding:0;position:relative;visibility:visible;background-color:transparent;display:inline-block"><iframe id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;border:0;width:undefinedpx;height:undefinedpx" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-7750788533596067&amp;output=html&amp;adk=1812271804&amp;adf=3025194257&amp;lmt=1677930309&amp;plat=3%3A65536%2C4%3A65536%2C9%3A32768%2C16%3A8388608%2C17%3A32%2C24%3A32%2C25%3A32%2C30%3A1048576%2C32%3A32%2C41%3A32%2C42%3A32&amp;format=0x0&amp;url=http%3A%2F%2Flocalhost%3A45678%2Fflutter2&amp;ea=0&amp;pra=5&amp;wgl=1&amp;dt=1677930354245&amp;bpp=27&amp;bdt=192&amp;idt=323&amp;shv=r20230301&amp;mjsv=m202302210101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D3807842bdc642316-2278a985b6db00d4%3AT%3D1677930310%3ART%3D1677930310%3AS%3DALNI_MZ9d7V-bjIkoUkers4-JorUDCC2vg&amp;gpic=UID%3D000009569b42e752%3AT%3D1677930310%3ART%3D1677930310%3AS%3DALNI_MZ43Ab-KxIUzsnclzlavQUfcbsUsA&amp;nras=1&amp;correlator=364479019753&amp;frm=20&amp;pv=2&amp;ga_vid=1509977907.1677930355&amp;ga_sid=1677930355&amp;ga_hid=767265524&amp;ga_fc=0&amp;u_tz=0&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=480&amp;bih=850&amp;scr_x=0&amp;scr_y=0&amp;eid=44759837%2C44777876%2C44759876%2C44759927%2C31071756%2C31072648%2C31071975&amp;oid=2&amp;pvsid=3497318435525649&amp;tmod=990264506&amp;uas=3&amp;nvt=1&amp;fc=1920&amp;brdim=0%2C0%2C0%2C0%2C800%2C0%2C800%2C600%2C480%2C850&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=33792&amp;bc=31&amp;ifi=1&amp;uci=a!1&amp;fsb=1&amp;dtd=382" data-google-container-id="a!1" data-load-complete="true"></iframe></div></ins><script src="_content/MudBlazor/MudBlazor.min.js"></script><script src="js/highlight.min.js"></script><script src="js/javascript.js"></script><script>var Module; window.__wasmmodulecallback__(); delete window.__wasmmodulecallback__;</script><script src="_framework/dotnet.6.0.14.iiw8sbvu70.js" defer="" integrity="sha256-54cJ6JdGhGbKaLWxHfRYzYbuyRq2wlK/ZDzfSXD3FEs=" crossorigin="anonymous"></script><iframe src="https://www.google.com/recaptcha/api2/aframe" width="0" height="0" style="display:none"></iframe></body><iframe id="google_esf" name="google_esf" src="https://googleads.g.doubleclick.net/pagead/html/r20230301/r20190131/zrt_lookup.html" style="display:none"></iframe></html>