<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="keywords" content="中二病也要寫程式"><meta name="description" content="中二病也要寫程式"><meta property="og:title" content="中二病也要寫程式"><meta property="og:description" content="中二病也要寫程式"><meta name="twitter:title" content="中二病也要寫程式"><meta name="twitter:description" content="中二病也要寫程式"><base href="/Blog/"><link href="css/bootstrap/bootstrap.min.css" rel="stylesheet"><link href="css/app.css" rel="stylesheet"><link href="Blog.styles.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;display=swap" rel="stylesheet"><link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet"><link rel="stylesheet" href="css/a11y-dark.min.css"><link rel="stylesheet" href="css/custom.css"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7750788533596067" crossorigin="anonymous"></script><!--!--><title><!--!-->GCP 免費主機架設網站</title><!--!--><!--!--><!--!--><meta name="description" content="使用 GCP (Google Cloud Platform) 創建免費虛擬主機 (VM) 來架設網站"></head><body style="background-color:#2b2c30"><div id="app" style="width:100vw;height:100vh"><!--!--><!--!--><!--!--><!--!--><div class="page" b-p6zcnqvy2k=""><div class="sidebar" style="background-image:url(images/nav.jpg);background-repeat:no-repeat;background-size:cover" b-p6zcnqvy2k=""><!--!--><!--!--><div class="top-row ps-3 navbar navbar-dark" b-wtm1afifms=""><div class="container-fluid" b-wtm1afifms=""><a class="navbar-brand" href="" b-wtm1afifms="">中二病也要寫程式</a></div></div><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none navlist" style="color:#fff;overflow-y:auto;height:95%"><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple mud-expanded"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">C#</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon mud-transform" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-collapse-entered mud-navgroup-collapse" style="height:auto" _bl_2=""><div class="mud-collapse-wrapper" _bl_3=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./csharp1" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->C#基礎 - new vs overrvide</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./csharp2" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->ASP.NET Web API 訊息處理器</div></a></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">Blazor</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-navgroup-collapse" style="" _bl_12=""><div class="mud-collapse-wrapper" _bl_13=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./blazor1" rel="" class="mud-nav-link"><div class="mud-nav-link-text">StateHasChanged() vs InvokeAsync(StateHasChanged)</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./blazor2" rel="" class="mud-nav-link"><div class="mud-nav-link-text">Service Lifetime</div></a></div></div></div></div></div></div></div></div></div></div></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple mud-expanded"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">JavaScript</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon mud-transform" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-collapse-entered mud-navgroup-collapse" style="height:auto" _bl_4=""><div class="mud-collapse-wrapper" _bl_5=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./javascript1" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->Promise 簡介</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./javascript2" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->使用 Promise 達到同步等待js資源載入</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./javascript3" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->傳統函式 VS 箭頭函式</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./javascript4" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->Cookie、LocalStorage、SessionStorage 差異</div></a></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">Vue</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-navgroup-collapse" style="" _bl_14=""><div class="mud-collapse-wrapper" _bl_15=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./vue1" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->Vue 生命週期</div></a></div></div></div></div></div></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">Nuxt</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-navgroup-collapse" style="" _bl_16=""><div class="mud-collapse-wrapper" _bl_17=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./nuxt1" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->Nuxt 生命週期</div></a></div></div></div></div></div></div></div></div></div></div></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple mud-expanded"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">Css</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon mud-transform" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-collapse-entered mud-navgroup-collapse" style="height:auto" _bl_6=""><div class="mud-collapse-wrapper" _bl_7=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./css1" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->EM 與 REM 的差異</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./css2" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->VH、VW、VMIN、VMAX</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./css3" rel="" class="mud-nav-link"><div class="mud-nav-link-text">Display Flex</div></a></div></div></div></div></div></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple mud-expanded"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">Dart</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon mud-transform" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-collapse-entered mud-navgroup-collapse" style="height:auto" _bl_8=""><div class="mud-collapse-wrapper" _bl_9=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./dart1" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->Dart基礎 - 初入dart</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./dart2" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->Dart基礎 - @immutable</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./dart3" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->Dart基礎 - 建構式</div></a></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">Flutter</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-navgroup-collapse" style="" _bl_18=""><div class="mud-collapse-wrapper" _bl_19=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./flutter1" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->編譯錯誤 : missing an input or output annotation</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./flutter2" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->什麼是 Bloc Design Pattern</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./flutter3" rel="" class="mud-nav-link"><div class="mud-nav-link-text">MaterialApp</div></a></div></div></div></div></div></div></div></div></div></div></div><!--!--><!--!--><div class="mud-nav-group"><button tabindex="0" class="mud-nav-link mud-ripple mud-expanded"><!--!--><svg class="mud-icon-root mud-icon-default mud-svg-icon mud-icon-size-medium mud-nav-link-icon mud-nav-link-icon-default" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"></path></svg><div class="mud-nav-link-text">Web Deploy</div><!--!--><svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mud-nav-link-expand-icon mud-transform" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><!--!--><path d="M0 0h24v24H0z" fill="none"></path><path d="M7 10l5 5 5-5z"></path></svg></button><!--!--><!--!--><div class="mud-collapse-container mud-collapse-entered mud-navgroup-collapse" style="height:auto" _bl_10=""><div class="mud-collapse-wrapper" _bl_11=""><div class="mud-collapse-wrapper-inner"><!--!--><div class="mud-navmenu mud-navmenu-default mud-navmenu-margin-none"><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./githubpage" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->Blazor WebAssembly 使用 Github Pages 進行部屬</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./gcpvm" rel="" class="mud-nav-link active"><div class="mud-nav-link-text"><!--!-->Google Cloud Platform 創建虛擬主機 (VM) 來架設網站</div></a></div><!--!--><!--!--><div class="mud-nav-item mud-ripple"><!--!--><a href="./gcpdocker" rel="" class="mud-nav-link"><div class="mud-nav-link-text"><!--!-->使用 Docker 建立 MySQL</div></a></div></div></div></div></div></div></div></div><!--!--><main b-p6zcnqvy2k=""><article class="content px-4" b-p6zcnqvy2k=""><div b-p6zcnqvy2k=""><!--!--><!--!--><!--!--><!--!--> <!--!--><!--!--><!--!--><div class="article"><!--!--><h2><b>使用GCP (Google Cloud Platform) 創建免費虛擬主機(VM)來架設網站</b></h2><br><!--!--><p>GCP 是什麼？ Google Cloud Platform （GCP） 是 Google 在雲端上提供的一組產品與服務，<br>包含「運算」（如 Compute Engine）、「資料分析」（如 BigQuery）和「機器學習」（如 AutoML）等。<br>GCP 讓您能在雲端上安全地使用與 Google 相同的技術和基礎架構，並且快速上手相關的開發及使用。<br></p><!--!--><h2><b>填寫相關資料</b></h2><p><!--!--> 先去辦個 Google 帳號，到<!--!--><a href="https://cloud.google.com/?authuser=2" class="mud-typography mud-link mud-primary-text mud-link-underline-always mud-typography-body1">GCP</a><!--!-->下開始免費試用，並填寫相關資訊，<br>這邊會要求你填寫付款方式來確認你不是機器人，試用期內並不會向你收取任何費用，如有需要之後再升級成付費方案即可。</p><!--!--> <img src="images/gcpvm_1.png" alt="gcpvm_1" class="imgfmt"> <img src="images/gcpvm_2.png" alt="gcpvm_2" class="imgfmt"><br><!--!--><h3><b>新增專案</b></h3><img src="images/gcpvm_4.png" alt="gcpvm_4" class="imgfmt"><!--!--><p>完成之後，接著就點選上方的「選取專案」，並點選「新增專案」</p><img src="images/gcpvm_5.png" alt="gcpvm_5" class="imgfmt" style="width:50%"><!--!--><p>接著幫你的專案取個名稱，取好之後就選擇「建立」。</p><!--!--><h3><b>建立一台虛擬主機</b></h3><img src="images/gcpvm_6.png" alt="gcpvm_6" class="imgfmt" style="width:50%"><br><!--!--><h3><b>設定主機規格</b></h3><br><img src="images/gcpvm_7.png" alt="gcpvm_7" class="imgfmt"> <img src="images/gcpvm_8.png" alt="gcpvm_8" class="imgfmt"><br><!--!--><p>接下來我們要來設定主機的位置與規格，設定分別如下：<br>1.地區選擇台灣。<br>2.區域任選一個都可以。<br>3.機器規格我是選預設的 1 個 CPU，3.75G 記憶體，當然你要選更高更低都可以。<br>4.這邊是主機的作業系統，建議選最多人用的 Ubuntu 18.04 LTS 版本。<br>5.HTTP, HTTPS 都勾選。<br>按下「建立」。</p><!--!--><h3><b>固定外部 IP</b></h3><img src="images/gcpvm_9.png" alt="gcpvm_9" class="imgfmt" style="width:50%"> <img src="images/gcpvm_10.png" alt="gcpvm_10" class="imgfmt"><br><!--!--><p>因為 GCP 預設每次重開機，主機 IP 都會變化，所以我們要先來這邊固定一下它的 IP，在這邊點選變更，將類型轉變為「靜態」。</p><!--!--><h3><b>建立防火牆規則</b></h3><img src="images/gcpvm_11.png" alt="gcpvm_11" class="imgfmt"> <img src="images/gcpvm_12.png" alt="gcpvm_12" class="imgfmt"><br><!--!--><p>因為 GCP 有做一些防護措施，因此我們要在防火牆這邊幫 vm 開一個門，依序設定：<br>1. 選擇「網路中的所有執行個體」。<br>2.來源 IP 範圍設定「0.0.0.0/0」，代表所有 IP 都遵守這個規則。<br>3.設定你的Tcp Port 按下「建立」</p><!--!--><h3><b>使用 SSH 連線入主機</b></h3><img src="images/gcpvm_13.png" alt="gcpvm_13" class="imgfmt"><br><!--!--><p>設定完防火牆之後，回到剛剛的「Compute Engine」中的「VM 執行個體」，並點選「SSH」。<br>接著我們要透過一種叫做 SSH 的方式來和主機進行溝通。</p><!--!--><h3><b>安裝 Vesta 控制面版</b></h3><!--!--><p>Vesta 是一款輕巧、UI 簡潔而且執行速度快的面板，它能安裝在 Red Hat、CentOS 及 Ubuntu 上執行，最特別的是它利用 Nginx 當反向代理來支援 Apache/PHP。 Nginx 會用來取代 Apache 監聽 80 port，處理訪問網站的連線請求，過濾請求之後再傳遞給 Apache。還有 JavaScripts、CSS、圖檔等靜態檔案也都是由 Nginx 處理， 如此一來， Vesta 基本上就是走 LAEMP 的架構，能夠用來輕鬆的建置網站，而且運行的速度非常快。</p><!--!--><pre><code class="Linux hljs language-sql">
        sudo apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> <span class="hljs-keyword">update</span>
        sudo curl <span class="hljs-operator">-</span>O http:<span class="hljs-operator">/</span><span class="hljs-operator">/</span>vestacp.com<span class="hljs-operator">/</span>pub<span class="hljs-operator">/</span>vst<span class="hljs-operator">-</span>install.sh
        sudo bash vst<span class="hljs-operator">-</span>install.sh <span class="hljs-comment">--force</span>
    </code></pre><!--!--><p>接著將上面提供的指令依序輸入</p><img src="images/gcpvm_14.png" alt="gcpvm_14" class="imgfmt" style="width:50%"><br><!--!--><p>依序回答：<br>Would you like to continue [y/n]: y<br>Please enter admin email address: 輸入你的 email<br>Please enter FQDN hostname [test.asia-east1-c.c.animateweb.internal]: 這邊可以輸入你未來要叫的網站名稱<br>接著等它安裝完成，大概15分鐘</p><img src="images/gcpvm_15.png" alt="gcpvm_15" class="imgfmt" style="width:50%"><br><!--!--><p>安裝完成之後，在這邊會獲得登入 Vesta 的網址與帳號密碼，記得把它整個複製保存起來。</p><!--!--><h3><b>在Liunx上安裝.NET執行環境</b></h3><!--!--><p>在ssh中執行以下命令</p><!--!--><pre><code class="Linux hljs language-bash">
        <span class="hljs-comment">#安裝 .NET 之前，請執行下列命令，將 Microsoft 套件簽署金鑰新增至信賴起點清單，並新增套件存放庫</span>
        wget https://packages.microsoft.com/config/ubuntu/18.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb
        sudo dpkg -i packages-microsoft-prod.deb
        <span class="hljs-built_in">rm</span> packages-microsoft-prod.deb
    </code></pre><!--!--><pre><code class="Linux hljs language-csharp">
        <span class="hljs-meta">#安裝 SDK</span>
        sudo apt-<span class="hljs-keyword">get</span> update &amp;&amp; \
        sudo apt-<span class="hljs-keyword">get</span> install -y dotnet-sdk<span class="hljs-number">-6.0</span>
    </code></pre><!--!--><pre><code class="Linux hljs language-csharp">
        <span class="hljs-meta">#安裝 runtime</span>
        sudo apt-<span class="hljs-keyword">get</span> update &amp;&amp; \
        sudo apt-<span class="hljs-keyword">get</span> install -y aspnetcore-runtime<span class="hljs-number">-6.0</span>
    </code></pre><!--!--><p>可以使用 dotnet --version 來查看SDK是否安裝成功 至此你的VM已經有.NET的執行環境</p><!--!--><h3><b>發佈Asp.net core 專案</b></h3><!--!--><pre><code class="Json hljs language-Json">
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"Logging"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"LogLevel"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"Default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Information"</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"Microsoft.AspNetCore"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Warning"</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"urls"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://*:8093"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"AllowedHosts"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"*"</span>
        <span class="hljs-punctuation">}</span>
    </code></pre><!--!--><p>在發佈你的專案之前，請先在server的 appsetting.json 內設定網站訪問埠，ex "urls": "http://*:8093"</p><img src="images/gcpvm_16.png" alt="gcpvm_16" class="imgfmt" style="width:50%"> <img src="images/gcpvm_17.png" alt="gcpvm_17" class="imgfmt" style="width:50%"><!--!--><p>在專案右鍵點選發佈，目標選擇資料夾，完成後即可在你指定的資料夾下看見你發佈的檔案</p><!--!--><h3><b>使用 Xftp 將檔案上傳至伺服器</b></h3><img src="images/gcpvm_18.png" alt="gcpvm_18" class="imgfmt"><!--!--><p>輸入你的主機ip 位址後，會要你接著輸入帳密，把剛剛安裝Vesta獲得的帳密填入<br>接下來把你的專案資料夾直接挪到虛擬主機上。<br>在VM下定位到網站目錄，執行</p><!--!--><pre><code class="Json hljs language-Json">
        dotnet GCPTest.Server(一般與專案同名).dll
    </code></pre><img src="images/gcpvm_19.png" alt="gcpvm_19" class="imgfmt" style="width:50%"><!--!--><p>如果看到網站訪問地址，就說明網站已成功啟動。在瀏覽器網址列輸入http://伺服器IP:伺服器PORT， 看看這波操作後的成果吧~</p><!--!--><h3><b>在 Linux Ubuntu 作業系統將 ASP.NET Core 應用程式掛載 為 Linux 服務</b></h3><!--!--><p>在 /etc/systemd/system/ 目錄中建立自行定義的服務設定檔案（使用 vim 文字編輯工具）</p><!--!--><pre><code class="LINUX hljs language-bash">
        sudo vim /etc/systemd/system/{服務設定檔案名稱}.service
     </code></pre><!--!--><p>進行服務設定檔案的設定內容</p><!--!--><pre><code class="LINUX hljs language-ini">
        <span class="hljs-section">[Unit]</span>
        <span class="hljs-attr">Description</span>=ASP.NET Core Web API Application <span class="hljs-literal">on</span> Ubuntu

        <span class="hljs-section">[Service]</span>
        <span class="hljs-attr">WorkingDirectory</span>={應用程式資料夾路徑}
        <span class="hljs-attr">ExecStart</span>=/usr/bin/dotnet {應用程式路徑，包含 *.dll檔案}
        <span class="hljs-attr">Restart</span>=always
        <span class="hljs-attr">RestartSec</span>=<span class="hljs-number">10</span>
        <span class="hljs-attr">SyslogIdentifier</span>=dotnet-example
        <span class="hljs-attr">User</span>={要執行的使用者帳號}
        <span class="hljs-attr">Environment</span>=ASPNETCORE_ENVIRONMENT=Production 

        <span class="hljs-section">[Install]</span>
        <span class="hljs-attr">WantedBy</span>=multi-user.target
     </code></pre><!--!--><p>設定完成後儲存設定檔然後開啟服務</p><!--!--><pre><code class="LINUX hljs language-wasm">
        systemctl enable {服務設定檔案名稱}.service
        systemctl <span class="hljs-keyword">start</span> {服務設定檔案名稱}.service
     </code></pre><!--!--><pre><code class="LINUX hljs language-r">
        systemctl start <span class="hljs-punctuation">{</span>服務設定檔案名稱<span class="hljs-punctuation">}</span>.service <span class="hljs-comment">#可使用下列指令檢查服務狀態</span>
        sudo systemctl stop animateapi.service <span class="hljs-comment">#停止服務</span>
     </code></pre></div></div></article></main></div><!--!--><!--!--></div><div id="blazor-error-ui">An unhandled error has occurred. <a href="" class="reload">Reload</a> <a class="dismiss">🗙</a></div><script src="_framework/blazor.webassembly.js"></script><script src="_content/MudBlazor/MudBlazor.min.js"></script><script src="js/highlight.min.js"></script><script src="js/javascript.js"></script></body></html>